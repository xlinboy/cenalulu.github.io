---
title:  "impala优化"
layout: archive
date:   2018-12-18 08:44:13
permalink: /hive/
categories: hive
---

## Impala 常用优化
1. 维度建模
    - 维度表
    - 事实表
    - 星型模型
    - 雪花模型
2. 文件存储格式
    - Parquet
    - Text
    – Avro
    - Rcfile
3. SQL Tuning
    - Explain
    - Join
    - 数据裁剪

## Broadcast join
> 将较小的表通过网络分发到所有需要执行该连接的Impala后台进程，并根据数据建立哈希表保存到内存中，然后读取大表在本节点中的数据，并使用内存中的哈希表查找匹配的记录  

<br/>

![img](http://pc06h57sq.bkt.clouddn.com/blog/181112/jl8b5Kmm27.png?imageslim)  

## Partition join
<img src="https://xlactive-1258062314.cos.ap-chengdu.myqcloud.com/patitionjoin.png" />

## 其它优化策略
1. summary
2. profile
3. 资源控制
    - 配置资源池
    - 高并发时分散连接到不同的impalad节点
    - 合理利用men_limit参数
4. 数据倾斜的优化
    - 分步计算，最后合并
    - 数据倾斜的join key打散

